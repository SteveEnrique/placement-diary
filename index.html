<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RKMVC Placement Diary</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        rkm: {
                            maroon: '#800000', // Official Maroon
                            gold: '#FFC107',   // Official Gold
                            cream: '#FFF8E1',  // Warm Background
                            light: '#FDFBF7'   // Paper-like off-white
                        }
                    }
                }
            }
        }
    </script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* Using system fonts stack for reliability if Google Fonts fails */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        .serif { font-family: "Times New Roman", Times, serif; }
        
        @media print {
            body { background: white; }
            .no-print { display: none !important; }
            .print-break-inside-avoid { break-inside: avoid; }
        }
        .animate-fade-in { animation: fadeIn 0.4s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-rkm-cream text-slate-900">
    <div id="root"></div>
    <script type="text/babel" data-type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, deleteDoc, doc, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";

        // ✅ CONFIGURATION (Using the exact keys you pasted)
        const HARDCODED_CONFIG = {
            apiKey: "AIzaSyAIILFjh265a8dDtUmDaukEst2s12GqvME",
            authDomain: "rkmvc-placement-2025-2026.firebaseapp.com",
            projectId: "rkmvc-placement-2025-2026",
            storageBucket: "rkmvc-placement-2025-2026.firebasestorage.app",
            messagingSenderId: "886169557208",
            appId: "1:886169557208:web:2e69a76704a587a9e79fad",
            measurementId: "G-3V10HBHF1Y"
        };
        
        const APP_COLLECTION_ID = "rkmvc-placement-diary-live-v2";
        const LOGO_URL = "https://upload.wikimedia.org/wikipedia/en/thumb/7/76/Ramakrishna_Mission_Emblem.svg/1200px-Ramakrishna_Mission_Emblem.svg.png"; 

        // --- SOUND ENGINE ---
        const SoundEngine = {
            ctx: null,
            enabled: true,
            init: () => { if (!SoundEngine.ctx) { const AC = window.AudioContext || window.webkitAudioContext; SoundEngine.ctx = new AC(); } },
            click: () => { SoundEngine.init(); if(SoundEngine.ctx && SoundEngine.enabled) { const o = SoundEngine.ctx.createOscillator(); const g = SoundEngine.ctx.createGain(); o.frequency.value=600; o.connect(g); g.connect(SoundEngine.ctx.destination); o.start(); g.gain.exponentialRampToValueAtTime(0.00001, SoundEngine.ctx.currentTime+0.1); o.stop(SoundEngine.ctx.currentTime+0.1); }},
            success: () => { SoundEngine.init(); if(SoundEngine.ctx && SoundEngine.enabled) { const now=SoundEngine.ctx.currentTime; const o=SoundEngine.ctx.createOscillator(); const g=SoundEngine.ctx.createGain(); o.frequency.setValueAtTime(500, now); o.frequency.exponentialRampToValueAtTime(1000, now+0.1); o.connect(g); g.connect(SoundEngine.ctx.destination); o.start(); o.stop(now+0.2); } }
        };

        // --- ICONS ---
        const Icon = ({ name, size = 20, className = "" }) => { React.useEffect(() => { if (window.lucide) window.lucide.createIcons(); }, [name]); return <i data-lucide={name} className={className} style={{ width: size, height: size, display: 'inline-block', verticalAlign: 'middle' }}></i>; };
        const safeParseInt = (val) => { const num = parseInt(String(val).replace(/\D/g, '')); return isNaN(num) ? 0 : num; };

        // --- COMPONENTS ---

        const Navbar = ({ activeTab, setActiveTab, isEditMode, setEditMode }) => (
            <nav className="sticky top-0 z-50 bg-rkm-maroon shadow-lg border-b-4 border-rkm-gold no-print text-white">
                <div className="max-w-7xl mx-auto px-4">
                    <div className="flex flex-col md:flex-row justify-between items-center h-auto md:h-20 py-3 md:py-0 gap-4">
                        <div className="text-center md:text-left cursor-pointer" onClick={() => { SoundEngine.click(); window.scrollTo(0,0); }}>
                            <h1 className="font-bold text-lg md:text-xl uppercase tracking-wide leading-none text-white">Ramakrishna Mission</h1>
                            <h2 className="font-bold text-xl md:text-2xl uppercase leading-none text-rkm-gold font-serif mt-1">Vivekananda College</h2>
                        </div>
                        
                        <div className="flex items-center gap-4">
                            <div className="flex bg-red-950/30 p-1 rounded-lg overflow-x-auto max-w-[280px] md:max-w-none">
                                {['stats', 'activities', 'officials', 'team'].map(tab => (
                                    <button 
                                        key={tab}
                                        onClick={() => { SoundEngine.click(); setActiveTab(tab); }} 
                                        className={`px-4 py-1.5 rounded-md text-xs font-bold transition-all uppercase whitespace-nowrap ${activeTab === tab ? 'bg-rkm-gold text-rkm-maroon shadow' : 'text-white/70 hover:text-white hover:bg-white/10'}`}
                                    >
                                        {tab}
                                    </button>
                                ))}
                            </div>
                            <div className="hidden md:block h-8 w-px bg-white/20 mx-1"></div>
                            <button onClick={() => { SoundEngine.click(); window.print(); }} className="text-white/70 hover:text-rkm-gold cursor-pointer" title="Print"><Icon name="printer" size={20} /></button>
                            <button onClick={() => { SoundEngine.click(); setEditMode(!isEditMode); }} className={`cursor-pointer ${isEditMode ? 'text-rkm-gold' : 'text-white/70 hover:text-white'}`} title="Admin Mode"><Icon name={isEditMode ? "unlock" : "lock"} size={20} /></button>
                        </div>
                    </div>
                </div>
            </nav>
        );

        // --- STATISTICS VIEW ---
        const StatsView = ({ data, isEditMode, onDelete, onAdd, loading }) => {
            if (loading) return <div className="text-center py-20 text-rkm-maroon/50 font-bold">Loading Statistics...</div>;
            const totalPlaced = data.reduce((acc, curr) => acc + safeParseInt(curr.selected), 0);
            const totalCompanies = new Set(data.map(s => s.company)).size;

            return (
                <div className="animate-fade-in">
                    <div className="bg-white/50 border-b border-rkm-maroon/10 py-8 text-center">
                         <h2 className="text-3xl md:text-4xl font-bold font-serif text-rkm-maroon mb-2">Placement Overview</h2>
                         <div className="flex justify-center gap-6 mt-6">
                            <div className="bg-white p-4 rounded-xl border-l-4 border-rkm-gold shadow-sm w-40">
                                <div className="text-4xl font-bold text-rkm-maroon">{totalPlaced}</div>
                                <div className="text-[10px] font-bold uppercase text-slate-500 tracking-wider">Offers</div>
                            </div>
                            <div className="bg-white p-4 rounded-xl border-l-4 border-rkm-maroon shadow-sm w-40">
                                <div className="text-4xl font-bold text-rkm-maroon">{totalCompanies}</div>
                                <div className="text-[10px] font-bold uppercase text-slate-500 tracking-wider">Recruiters</div>
                            </div>
                         </div>
                    </div>

                    <div className="max-w-7xl mx-auto px-4 py-8 pb-20">
                        <div className="bg-white rounded-lg shadow-md border border-rkm-maroon/20 overflow-hidden">
                            <div className="p-4 border-b border-rkm-maroon/10 flex justify-between items-center bg-rkm-maroon text-white">
                                <h3 className="font-bold flex items-center gap-2 text-lg"><Icon name="table" size={20} className="text-rkm-gold"/> Recruitment Data</h3>
                                {isEditMode && <button onClick={onAdd} className="bg-rkm-gold text-rkm-maroon px-3 py-1 rounded text-xs font-bold uppercase tracking-wider hover:bg-white transition flex items-center gap-1"><Icon name="plus" size={14}/> Add</button>}
                            </div>
                            <div className="overflow-x-auto">
                                <table className="w-full text-sm text-left whitespace-nowrap">
                                    <thead className="bg-rkm-cream text-rkm-maroon border-b border-rkm-maroon/20">
                                        <tr>
                                            {['Date', 'Company', 'Mode', 'Apt', 'GD', 'Tech', 'HR', 'Selected'].map(h => <th key={h} className="px-6 py-4 font-bold uppercase text-xs tracking-wider">{h}</th>)}
                                            {isEditMode && <th></th>}
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-rkm-maroon/10">
                                        {data.length === 0 && <tr><td colSpan="9" className="p-8 text-center text-slate-400 italic">No records found.</td></tr>}
                                        {data.map((row) => (
                                            <tr key={row.id} className="hover:bg-rkm-gold/10 transition-colors">
                                                <td className="px-6 py-4 font-mono text-slate-500 text-xs">{new Date(row.date).toLocaleDateString('en-GB')}</td>
                                                <td className="px-6 py-4 font-bold text-rkm-maroon">{row.company}</td>
                                                <td className="px-6 py-4"><span className="px-2 py-0.5 rounded bg-white border border-slate-200 text-xs font-medium">{row.mode}</span></td>
                                                <td className="px-6 py-4 text-center text-slate-600">{row.aptitude}</td>
                                                <td className="px-6 py-4 text-center text-slate-600">{row.gd}</td>
                                                <td className="px-6 py-4 text-center text-slate-600">{row.tech}</td>
                                                <td className="px-6 py-4 text-center text-slate-600">{row.hr}</td>
                                                <td className="px-6 py-4 text-center"><span className="bg-green-100 text-green-800 px-3 py-1 rounded-full font-bold text-xs border border-green-200">{row.selected}</span></td>
                                                {isEditMode && <td className="px-6 py-4 text-right"><button onClick={() => onDelete(row.id, 'placement_stats')} className="text-slate-300 hover:text-red-600"><Icon name="trash-2" size={16}/></button></td>}
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- ACTIVITIES VIEW ---
        const ActivitiesView = ({ data, isEditMode, onDelete, onAdd, loading }) => {
            const [filter, setFilter] = React.useState('All');
            if (loading) return <div className="text-center py-20 text-rkm-maroon/50 font-bold">Loading Activities...</div>;
            const filteredData = filter === 'All' ? data : data.filter(item => (item.category || 'Recruitment Drive') === filter);

            return (
                <div className="min-h-screen pb-20 animate-fade-in">
                    <div className="bg-white/50 border-b border-rkm-maroon/10 pt-8 pb-4 mb-8 text-center">
                        <h2 className="text-3xl font-serif font-bold text-rkm-maroon mb-4">Activities Log</h2>
                        <div className="flex flex-wrap justify-center gap-2 px-4">
                            {['All', 'Recruitment Drive', 'Student Empowerment', 'Event'].map(cat => (
                                <button key={cat} onClick={() => { SoundEngine.click(); setFilter(cat); }} className={`px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wide transition-all border ${filter === cat ? 'bg-rkm-maroon text-white border-rkm-maroon shadow' : 'bg-white text-slate-500 border-slate-200 hover:border-rkm-gold'}`}>{cat}</button>
                            ))}
                        </div>
                        {isEditMode && <button onClick={() => { SoundEngine.click(); onAdd(); }} className="mt-6 text-rkm-maroon border border-rkm-maroon px-4 py-1 rounded hover:bg-rkm-maroon hover:text-white text-xs font-bold uppercase transition">+ Add Activity</button>}
                    </div>
                    <div className="max-w-3xl mx-auto px-4 space-y-8">
                        {filteredData.length === 0 && <div className="text-center text-slate-400 py-12 italic border-2 border-dashed border-slate-300 rounded-xl">No activities found.</div>}
                        {filteredData.map((item) => (
                            <article key={item.id} className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden hover:shadow-lg transition-shadow border-l-4 border-l-rkm-gold">
                                {item.image && (
                                    <div className="w-full h-48 md:h-64 overflow-hidden bg-slate-100 relative">
                                        <img src={item.image} className="w-full h-full object-cover" onError={(e) => e.target.style.display='none'} />
                                        <div className="absolute top-3 right-3 bg-rkm-maroon text-white px-3 py-1 rounded text-xs font-bold shadow flex items-center gap-1"><Icon name="calendar" size={12}/> {new Date(item.date).toLocaleDateString('en-GB')}</div>
                                    </div>
                                )}
                                <div className="p-6">
                                    <div className="flex items-center justify-between mb-3">
                                        <div className="flex items-center gap-2 text-[10px] font-bold uppercase tracking-wider text-slate-400">
                                            {!item.image && <span className="flex items-center gap-1 text-rkm-maroon"><Icon name="calendar" size={12}/> {new Date(item.date).toLocaleDateString('en-GB')}</span>}
                                            <span className="px-2 py-0.5 rounded bg-slate-100 text-slate-600 border border-slate-200">{item.category || 'General'}</span>
                                        </div>
                                        {isEditMode && <button onClick={() => onDelete(item.id, 'placement_diary')} className="text-slate-300 hover:text-red-600"><Icon name="trash-2" size={16}/></button>}
                                    </div>
                                    <h3 className="text-xl font-serif font-bold text-rkm-maroon mb-3">{item.title}</h3>
                                    {item.location && <div className="text-xs font-bold text-slate-500 mb-3 flex items-center"><Icon name="map-pin" size={12} className="mr-1 text-rkm-gold"/> {item.location}</div>}
                                    <div className="prose prose-slate max-w-none text-sm text-slate-700 leading-relaxed whitespace-pre-wrap border-t border-slate-100 pt-3">{item.desc}</div>
                                </div>
                            </article>
                        ))}
                    </div>
                </div>
            );
        };

        // --- OFFICIALS & TEAM VIEW ---
        const PeopleView = ({ data, title, subtitle, isEditMode, onDelete, onAdd, type, loading }) => (
            <div className="min-h-screen pb-20 animate-fade-in">
                <div className="bg-white/50 border-b border-rkm-maroon/10 py-12 text-center mb-8">
                    <h2 className="text-3xl font-serif font-bold text-rkm-maroon mb-2">{title}</h2>
                    <p className="text-slate-500 max-w-xl mx-auto text-sm">{subtitle}</p>
                </div>
                <div className="max-w-5xl mx-auto px-4">
                    {isEditMode && <div className="text-center mb-8"><button onClick={() => { SoundEngine.click(); onAdd(); }} className="bg-rkm-maroon text-white px-6 py-2 rounded shadow font-bold text-sm uppercase tracking-wider hover:bg-red-900">+ Add Member</button></div>}
                    {loading && <div className="text-center text-slate-400">Loading...</div>}
                    <div className={`grid grid-cols-1 ${type==='team' ? 'md:grid-cols-3 lg:grid-cols-4' : 'md:grid-cols-2 lg:grid-cols-3'} gap-6`}>
                        {data.map(p => (
                            <div key={p.id} className="bg-white p-6 rounded-xl shadow-sm border border-slate-200 border-t-4 border-t-rkm-maroon text-center hover:shadow-md transition-shadow relative group">
                                {isEditMode && <button onClick={() => onDelete(p.id, type === 'team' ? 'placement_team' : 'placement_officials')} className="absolute top-2 right-2 text-slate-300 hover:text-red-600"><Icon name="trash-2" size={16}/></button>}
                                <div className={`mx-auto bg-slate-100 rounded-full mb-4 overflow-hidden border-2 border-rkm-gold shadow-sm ${type==='team'?'w-16 h-16':'w-24 h-24'}`}>
                                    {p.image ? <img src={p.image} className="w-full h-full object-cover" /> : <div className="w-full h-full flex items-center justify-center text-slate-300"><Icon name="user" size={type==='team'?24:40}/></div>}
                                </div>
                                <h3 className="font-bold text-lg text-slate-800 leading-tight">{p.name}</h3>
                                <p className="text-rkm-maroon font-serif text-xs mb-1 font-bold">{p.role}</p>
                                {p.dept && <span className="bg-rkm-cream text-rkm-maroon text-[10px] px-2 py-0.5 rounded uppercase tracking-wider font-bold">{p.dept}</span>}
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );

        // --- FORMS ---
        const Modal = ({ isOpen, onClose, title, children }) => {
            if (!isOpen) return null;
            return (<div className="fixed inset-0 z-[100] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in"><div className="bg-white rounded-lg shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh] border-t-8 border-rkm-maroon"><div className="px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50"><h3 className="font-bold text-lg text-rkm-maroon font-serif">{title}</h3><button onClick={() => { SoundEngine.click(); onClose(); }}><Icon name="x" size={20} className="text-slate-400 hover:text-red-600 transition-colors"/></button></div><div className="p-6 overflow-y-auto bg-white">{children}</div></div></div>);
        };

        const AddStatForm = ({ onClose, db }) => {
            const [f, setF] = React.useState({ date: "", company: "", mode: "Physical", aptitude: "", gd: "", tech: "", hr: "", selected: "" });
            const sub = async (e) => { e.preventDefault(); await addDoc(collection(db, 'artifacts', APP_COLLECTION_ID, 'public', 'data', 'placement_stats'), { ...f, createdAt: serverTimestamp() }); SoundEngine.success(); onClose(); };
            return (<form onSubmit={sub} className="space-y-4"><div className="grid grid-cols-2 gap-3"><input type="date" required className="w-full p-2 border rounded bg-slate-50" onChange={e=>setF({...f,date:e.target.value})} /><select className="w-full p-2 border rounded bg-slate-50" onChange={e=>setF({...f,mode:e.target.value})}><option>Physical</option><option>Virtual</option><option>Mixed</option></select></div><input required placeholder="Company Name" className="w-full p-2 border rounded font-bold" onChange={e=>setF({...f,company:e.target.value})} /><div className="grid grid-cols-4 gap-2">{['aptitude', 'gd', 'tech', 'hr'].map(k => <input key={k} placeholder={k.toUpperCase()} className="p-2 border rounded text-center" onChange={e=>setF({...f,[k]:e.target.value})} />)}</div><input placeholder="Selected" className="w-full p-2 border border-green-300 bg-green-50 font-bold" onChange={e=>setF({...f,selected:e.target.value})} /><button className="w-full bg-rkm-maroon text-white p-3 rounded font-bold hover:bg-red-900">Save</button></form>);
        };

        const AddDiaryForm = ({ onClose, db }) => {
            const [f, setF] = React.useState({ date: "", title: "", desc: "", location: "", image: "", tags: "", category: "Recruitment Drive" });
            const sub = async (e) => { e.preventDefault(); const t = f.tags.split(','); await addDoc(collection(db, 'artifacts', APP_COLLECTION_ID, 'public', 'data', 'placement_diary'), { ...f, tags: t, createdAt: serverTimestamp() }); SoundEngine.success(); onClose(); };
            return (<form onSubmit={sub} className="space-y-4"><div className="grid grid-cols-2 gap-3"><input type="date" required className="w-full p-2 border rounded" onChange={e=>setF({...f,date:e.target.value})} /><select className="w-full p-2 border rounded" onChange={e=>setF({...f,category:e.target.value})}><option>Recruitment Drive</option><option>Student Empowerment</option><option>Event</option></select></div><input required placeholder="Title" className="w-full p-2 border rounded font-bold" onChange={e=>setF({...f,title:e.target.value})} /><textarea required placeholder="Description..." className="w-full p-2 border rounded h-32" onChange={e=>setF({...f,desc:e.target.value})}></textarea><input placeholder="Image URL" className="w-full p-2 border rounded text-sm" onChange={e=>setF({...f,image:e.target.value})} /><button className="w-full bg-rkm-maroon text-white p-3 rounded font-bold hover:bg-red-900">Publish</button></form>);
        };

        const AddPersonForm = ({ onClose, db, type }) => {
            const [f, setF] = React.useState({ name: "", role: "", dept: "", image: "" });
            const sub = async (e) => { e.preventDefault(); await addDoc(collection(db, 'artifacts', APP_COLLECTION_ID, 'public', 'data', type), { ...f, createdAt: serverTimestamp() }); SoundEngine.success(); onClose(); };
            return (<form onSubmit={sub} className="space-y-4"><input required placeholder="Name" className="w-full p-2 border rounded font-bold" onChange={e=>setF({...f,name:e.target.value})} /><input required placeholder="Role/Designation" className="w-full p-2 border rounded" onChange={e=>setF({...f,role:e.target.value})} /><input placeholder="Department" className="w-full p-2 border rounded" onChange={e=>setF({...f,dept:e.target.value})} /><input placeholder="Photo URL" className="w-full p-2 border rounded" onChange={e=>setF({...f,image:e.target.value})} /><button className="w-full bg-rkm-maroon text-white p-3 rounded font-bold hover:bg-red-900">Add</button></form>);
        };

        // --- MAIN APP ---
        const App = () => {
            const [user, setUser] = React.useState(null);
            const [db, setDb] = React.useState(null);
            const [data, setData] = React.useState({ stats: [], diary: [], officials: [], team: [] });
            const [loading, setLoading] = React.useState(true);
            const [activeTab, setActiveTab] = React.useState('stats');
            const [isEdit, setIsEdit] = React.useState(false);
            const [modal, setModal] = React.useState(null);
            const [soundOn, setSoundOn] = React.useState(true);

            React.useEffect(() => { SoundEngine.enabled = soundOn; }, [soundOn]);

            React.useEffect(() => {
                try {
                    const app = initializeApp(HARDCODED_CONFIG);
                    const auth = getAuth(app);
                    const database = getFirestore(app);
                    setDb(database);
                    signInAnonymously(auth).catch(console.error);
                    onAuthStateChanged(auth, setUser);
                } catch(e) { console.error(e); }
            }, []);

            React.useEffect(() => {
                if (!user || !db) return;
                const sub = (col, key) => onSnapshot(query(collection(db, 'artifacts', APP_COLLECTION_ID, 'public', 'data', col)), s => {
                    setData(prev => ({ ...prev, [key]: s.docs.map(d => ({id: d.id, ...d.data()})) }));
                    setLoading(false);
                });
                sub('placement_stats', 'stats');
                sub('placement_diary', 'diary');
                sub('placement_officials', 'officials');
                sub('placement_team', 'team');
            }, [user, db]);

            const deleteRec = async (id, type) => {
                SoundEngine.click();
                if (confirm("Delete permanently?")) {
                    await deleteDoc(doc(db, 'artifacts', APP_COLLECTION_ID, 'public', 'data', type, id));
                    SoundEngine.click();
                }
            };

            return (
                <div className="min-h-screen flex flex-col">
                    <Navbar activeTab={activeTab} setActiveTab={setActiveTab} isEditMode={isEdit} setEditMode={setIsEdit} />
                    
                    <main className="flex-grow">
                        {activeTab === 'stats' && <StatsView data={data.stats} isEditMode={isEdit} onDelete={deleteRec} onAdd={() => { SoundEngine.click(); setModal('stat'); }} loading={loading} />}
                        {activeTab === 'activities' && <ActivitiesView data={data.diary} isEditMode={isEdit} onDelete={deleteRec} onAdd={() => { SoundEngine.click(); setModal('diary'); }} loading={loading} />}
                        {activeTab === 'officials' && <OfficialsView data={data.officials} isEditMode={isEdit} onDelete={deleteRec} onAdd={() => { SoundEngine.click(); setModal('official'); }} loading={loading} />}
                        {activeTab === 'team' && <PeopleView data={data.team} title="Student Coordinators" subtitle="The driving force behind our placement success." isEditMode={isEdit} onDelete={deleteRec} onAdd={() => { SoundEngine.click(); setModal('team'); }} type="team" loading={loading} />}
                    </main>

                    <footer className="bg-rkm-maroon text-white py-6 text-center no-print mt-auto flex flex-col items-center border-t-4 border-rkm-gold">
                        <p className="opacity-80 text-sm">© 2025 Career Guidance Bureau | RKMVC</p>
                        <button onClick={() => setSoundOn(!soundOn)} className={`mt-2 text-[10px] border border-white/20 px-2 py-1 rounded hover:bg-white/10 ${soundOn ? 'text-rkm-gold' : 'text-white/50'}`}>
                            Sound: {soundOn ? 'ON' : 'OFF'}
                        </button>
                    </footer>

                    <Modal isOpen={!!modal} onClose={() => { SoundEngine.click(); setModal(null); }} title={modal==='stat'?"Add Statistic":modal==='diary'?"Add Activity":"Add Person"}>
                        {modal === 'stat' && <AddStatForm onClose={() => setModal(null)} db={db} />}
                        {modal === 'diary' && <AddDiaryForm onClose={() => setModal(null)} db={db} />}
                        {(modal === 'official' || modal === 'team') && <AddPersonForm onClose={() => setModal(null)} db={db} type={modal === 'official' ? 'placement_officials' : 'placement_team'} />}
                    </Modal>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
